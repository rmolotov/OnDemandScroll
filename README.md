# On-demand scroll

## Архитектура
Не стал использовать Zenject, а построил на синглтонах. Чтобы удобнее было тестировать разное поведение управление зависимостями сделал через интерфейс. На сцене есть SceneContext - в него вложены GameObjects с компонентами-сервисами. Какой GO включен, у того и сработает Awake, такая реализация и "зарегистрируется". Для тестов и прототипов удобно переключать сервисы в редакторе, для настоящего большого проекта - Zenject. Тогда и большинство этих сервисов может стать не-MonoBeh.

Управление ресурсами очень неудобное - пришлось делать обертку в Task для нормального интерфейса и поддержки асинхронности. Сделал альтернативную реализацию через аддресаблы.

## Верстака и popup-ы
Вся верстка адаптивная, рассчитывается при запуске относительно размера экрана. Используется и учитывается CanvasScaler. Привык верстать по Фигме, обычно собирали только под iOS - соответственно макет был в 2 вариантах, спрайты все экспортировали в 300 ppi. Понимаю, что целевая платформа еще и Android со всем зоопарком устройств - верстку сделал адаптивную. Но для сохранения единого масштаба ассетов подход с CanvasScaler оставил.

Окно с деталями картинки из меню сделал всплывающим popup-ом - панелькой. Выделил интерфейс, чтобы дальше можно было расширить до сервиса, который выдает различные popup-ы во всей игре.

## Scroll и подгрузка ассетов on-demand
Часть функционала, вычисления, которые относятся к конкретным UI-элементам реализовал в Extension-методах для *ScrollRect и GridLayoutGroup.
Логику спавна ячеек, загрузки и освобождения ячеек - в MenuController.

Спавнятся и загружаются несколько строк в начале и конце меню. При прокрутке вниз - смещается "окно" просмотра:
* добавляются новые ячейки, если нужны Spawn New Line;
* эти ячейки инициализируются новыми данными и спрайтами Construct View
* строка сверху - "стирается", уничтожаются ссылки, высвобождаются ресурсы Release Sprites.

Когда заспавнились все ячейки становится активной кнопка прокрутки в конец списка. Кнопка прокрутки в начало доступна сразу и всегда. Можно улучшить - сделать прокрутку в конец доступной сразу и реализовать загрузку и спавн в обратном порядке снизу вверх. Но это усложнение вычислений. В ТЗ уточнений на это счет не было, решил упростить функционал чтобы не затягивать со сдачей задания.

## Git
Инициализировал локальный репозиторий, чтобы из коммитов были понятны ход выполнения задания, примерные затраты по времени и ход мыслей
